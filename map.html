<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8"/>
        <title>현재 위치 기반 지도</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <!-- Leaflet CSS -->
        <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
        <!-- Leaflet JS -->
        <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

        <style>
            #map {
                width: 100%;
                height: 500px;
            }
        </style>
    </head>
    <body>

        <h3>내 위치를 기반으로 한 오픈소스 지도</h3>
        <div id="map">지도 불러오는 중...</div>

        <script>
            // 기본 지도 위치 (초기값)
            var map = L
                .map('map')
                .setView([
                    37.5665, 126.9780
                ], 13); // 서울 시청

            // OSM 타일 레이어 추가
            L
                .tileLayer(
                    'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',
                    {attribution: '&copy; OpenStreetMap contributors'}
                )
                .addTo(map);

            // 사용자 위치 가져오기
            if (navigator.geolocation) {
                navigator
                    .geolocation
                    .getCurrentPosition(function (position) {
                        var lat = position.coords.latitude;
                        var lon = position.coords.longitude;

                        // 현재 위치로 지도 이동
                        map.setView([
                            lat, lon
                        ], 15);

                        // 마커 추가
                        L
                            .marker([lat, lon])
                            .addTo(map)
                            .bindPopup("당신의 현재 위치입니다.")
                            .openPopup();
                    }, function (error) {
                        alert("위치 정보를 가져올 수 없습니다: " + error.message);
                    });
            } else {
                alert("이 브라우저는 위치 정보를 지원하지 않습니다.");
            }
        </script>

    </body>
</html>